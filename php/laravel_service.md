# Service

## What's service?

- サービスとは、メールの送信、暗号化、ファイル操作、など Laravel における操作の単位
    - Middlewareも一定の操作をまとめてやる仕組みだが、何が違うのか？
- サービスの実体はクラスのインスタンス
- 複数のコントローラから

## What's Service Container?

- 「サービスの容れ物」であり、また「サービスの管理者」でもある
- サービスコンテナはクラスをインスタンス化する
- クラスのインスタンスを管理する。「管理」というのは：
    - サービスの受け入れや取り出し
    - クラスをインスタンス化する
    - サービス同士の依存関係の解決
        - たとえば、クラスBをnewする際のコンストラクタに、クラスAのインスタンスを渡す必要があるとする
        - つまりクラス A がインスタンス化される前にクラス B がインスタンス化されている必要がある
        - サービスコンテナなしだと...自分でクラスAとクラスBのインスタンス化を順に定義する
        - サービスコンテナありだと...`app()->bind('myclass', \MyNamespace\classB::class);`と書くと、classAのインスタンス化などは自動で行われる。自分で明示的に記述する必要はない


### Implementation
- `app()`
    - サービスコンテナの中身を表示するヘルパ関数
    - bind()の使い方をみると、これ自体がコンテナになっている？
- `app()->bind('myclass', function(){return 'John Doe';});`
    - コンテナに新しいサービスを登録する
    - 第一引数が登録したいクラスもしくはinterfaceの名前
    - 第二引数が「クラスインスタンスを返すClosure」
    - 実行するたびに新しいインスタンスを生成する
    - ここでは、関数がサービスとなっている
- `singleton()`
    - bind()と同じく、コンテナに新しいサービスを登録する
    - bind()と違い、何度実行しても同じインスタンスを使いまわす
- `$name = app()->make('myclass');`
    - コンテナからその名前のサービスを取り出す
    - 以下も同義
        - `$name = app('myName');`
        - `$name = resolve('myName');`
        - `$name = App::make('myName');`

## What's Service Provider?

- サービスプロバイダは、サービスをサービスコンテナにサービスを登録するのがお仕事
- 

## What's DI (Dependency Injection)?


## misc

- IoC: Inversion of Control


